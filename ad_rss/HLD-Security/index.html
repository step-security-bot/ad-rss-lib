<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Security - Intel ad-rss-lib</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Security";
        var mkdocs_page_input_path = "ad_rss/HLD-Security.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Intel ad-rss-lib
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../RELEASE_NOTES_AND_DISCLAIMERS/">Release Notes and Disclaimer</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Background</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../Overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../HLD-KeyDesignDecisionsAndAlternatives/">Design Discussions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../UnstructuredConstellations/">Unstructured Constellations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../HLD-ArchitectureOverview/">System Integration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../HLD-Safety/">Safety</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Security</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#architecture-and-dataflow">Architecture and dataflow</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rss-input-data-adrssworldworldmodel">RSS input data (ad::rss::world::WorldModel)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rss-output-data-adrssworldaccelerationrestriction">RSS output data (ad::rss::world::AccelerationRestriction)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rss-library-code-validation">RSS library code validation</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Appendix-ParameterDiscussion/">Parameter Discussion</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SupportedRssFeatures/">Supported RSS Features</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Map Integration</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../ad_rss_map_integration/Main/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../ad_rss_map_integration/ConstructRSSScenes/">Construction of the RSS Scenes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../ad_rss_map_integration/HandleRoadBoundaries/">Handling of road boundaries</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Building</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../BUILDING/">General build instructions</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Python Integration</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ad_rss_python/">Core Library</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../ad_rss_map_integration/ad_rss_map_integration_python/">Map Integration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Doxygen</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://intel.github.io/ad-rss-lib/doxygen/ad_rss/index.html">Core Library</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://intel.github.io/ad-rss-lib/doxygen/ad_rss_map_integration/index.html">Map Integration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Code Coverage</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://intel.github.io/ad-rss-lib/coverage/ad_rss/">Core Library</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://intel.github.io/ad-rss-lib/coverage/ad_rss_map_integration/">Map Integration</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../FAQ/">FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../CHANGELOG/">Changelog</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Intel ad-rss-lib</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Background</li>
      <li class="breadcrumb-item active">Security</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/intel/ad-rss-lib/edit/master/doc/ad_rss/HLD-Security.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="design-for-security">Design for Security<a class="headerlink" href="#design-for-security" title="Permanent link">&para;</a></h2>
<p>This chapter discusses security aspects.</p>
<h3 id="architecture-and-dataflow">Architecture and dataflow<a class="headerlink" href="#architecture-and-dataflow" title="Permanent link">&para;</a></h3>
<p>As a reminder of the high-level architecture, we refer to two figures from the <a href="../HLD-ArchitectureOverview/">integration chapter</a>.
The <a href="../HLD-ArchitectureOverview/#rss-subsystem"><em>RSS Subsystem</em></a> within the autonomous driving
(AD) system has a single input called
<em>rssWorldModelData</em>, and outputs called <em>rssProperResponse</em> and <em>rssAccelerationRestrictions</em>.
The section decribes further details of the RSS function including the internal calculation steps and internal dataflow.</p>
<p>In addition, we refer to the C++ software class <a href="https://intel.github.io/ad-rss-lib/doxygen/ad_rss/classad_1_1rss_1_1core_1_1RssCheck.html">ad::rss::core::RssCheck</a>
that implements the external RSS interface.
The top-level external interface is implemented using a single routine,
called <a href="https://intel.github.io/ad-rss-lib/doxygen/ad_rss/classad_1_1rss_1_1core_1_1RssCheck.html#aaded7bc01e921bcc9f05f60c98e7195c">calculateAccelerationRestriction()</a>,
which is a member function of the <em>RssCheck</em> class. This routine has a single input, called <em>worldModel</em> (of
type <a href="https://intel.github.io/ad-rss-lib/doxygen/ad_rss/structad_1_1rss_1_1world_1_1WorldModel.html">ad::rss::world::WorldModel</a>, and a single output,
called <em>accelerationRestriction</em> of type <a href="https://intel.github.io/ad-rss-lib/doxygen/ad_rss/structad_1_1rss_1_1world_1_1AccelerationRestriction.html">ad::rss::world::AccelerationRestriction</a>.</p>
<p>The library is single-thread, does not make network connections, and does not make connections with other processes remote or local.</p>
<p>The library does not make use of any 3rd party components besides logging capabilities, and as such does not have additional security dependencies.</p>
<p>The primary adversary model is one where invalid/incorrect input data could be provided to the library input interface by the system or from an upstream source.</p>
<p>In the following sections, we discuss security aspects related to:
input data (implemented by <em>ad::rss::world::WorldModel</em>), output data (implemented
by <em>ad::rss::world::AccelerationRestrictions</em>), and the RSS function itself (implemented
by <em>ad::rss::core::RssCheck</em>` and supporting library classes).</p>
<h3 id="rss-input-data-adrssworldworldmodel">RSS input data (<em>ad::rss::world::WorldModel</em>)<a class="headerlink" href="#rss-input-data-adrssworldworldmodel" title="Permanent link">&para;</a></h3>
<h4>Input data source</h4>
<p>The input data is contained in <em>ad::rss::world::WorldModel</em>. This data includes distances to
other road agents (vehicles and other) and velocities of other road agents. This
data also includes description of the geometry of the road (and road lanes).</p>
<p>The data contained in <em>ad::rss::world::WorldModel</em> is provided directly by a
calling routine external to the RSS library. Typically, this data will
ultimately originate from the vehicle sensing subsystem, but it is the
responsibility of the calling routine to receive, convert, and provide
this sensing-derived data to the RSS function in the correct format.
The calling routine must ensure the integrity of the input data
provided to the RSS library functions.</p>
<h4>Validity of input data and error handling</h4>
<p>The library attempts to ensure the validity of the input data, and handle cases of improper or invalid input data, in several ways.</p>
<p>Several explicit checks of the input data validity are performed, including the following.</p>
<ul>
<li>Check that the data structure describing the local road and lane geometries is
  internally consistent. The description of a local road follows basic constraints,
  and if the description is inconsistent with these constraints, the routine
  that analyzes the situation from the input data returns, with the success/fail
  flag set to <em>fail</em>.</li>
<li>Check that the data structures describing the ego-vehicle or other objects (other
  vehicles) are internally consistent. The routine that analyzes the situation checks
  against basic constraints. If the constraints are violated, the routine returns
  with the success/fail flag set to <em>fail</em>. For this, the routines <em>withinValidInputRange()</em>
  are used. The respective Doxygen description of these contains the absolute values against
  which the inputs (like e.g. velocities, accelerations, etc.) are checked.</li>
</ul>
<p>Error handling: Each routine in the library that invokes subroutines checks a success/fail flag returned by the subroutine. In addition,
many routines perform custom checking of the internal logic against known constraints of RSS.
A failure of a logic check or of a subroutine results in interruption of the routine and a fail flag being passed to the calling routine.</p>
<p>Exception handling: The code-blocks in high-level routines are enclosed inside C++ try-catch blocks.
Any exception thrown at lower-level software routines results in a fail flag being returned to the caller of the publicly available high-level routines.</p>
<p>When any of the above errors occur, the top-level RSS routine,
<em>ad::rss:core::RssCheck::calculateAccelerationRestriction()</em>, will return with the success/fail
flag set to <em>fail</em>.</p>
<p>Logging: The top-level routine in the library returns a success/fail flag that can
be recorded by logging functions that may be available in the overall AD system
(external to the library). The reason for the failure is logged using the global logger defined by <a href="https://github.com/gabime/spdlog">spdlog</a>.</p>
<h4>Non-functional requirements</h4>
<p>The size of the input data <em>ad::rss::world::WorldModel</em> provided to <em>ad::rss::core::RssCheck</em> is determined by the number of other objects (other vehicles or road agents) that the ego-vehicle is interacting with, and the size of the description of each object and associated road areas.  Based on this, it is straightforward to bound the size of data that must be consumed by the <em>ad::rss::core::RssCheck</em> in a single call, based on the sizes of individual datatypes and by bounding the number of objects.</p>
<p>It is the responsibility of the system integrator to determine the number of objects the system can handle and to bound the size of the input data.</p>
<p>It is the responsibility of the system integrator to determine an appropriate rate or a maximum rate at which the top-level routine,
<em>ad::rss::core::RssCheck::calculateAccelerationRestriction()</em>, should be invoked.</p>
<p>The latency resulting from the processing time of
<em>ad::rss::core::RssCheck::calculateAccelerationRestriction()</em> should be strictly limited, due
to the real-time nature of the AD system and closed-loop interaction with the
real world environment. This latency should be less than the time period
(1/rate) of the <a href="../HLD-ArchitectureOverview/#act-subsystem"><em>Act Subsystem</em></a>. It is the responsibility of the system
integrator to ensure that this is achieved, or to achieve a latency below an
upper bound that is tighter (lower) than the one mentioned here.</p>
<h3 id="rss-output-data-adrssworldaccelerationrestriction">RSS output data (<em>ad::rss::world::AccelerationRestriction</em>)<a class="headerlink" href="#rss-output-data-adrssworldaccelerationrestriction" title="Permanent link">&para;</a></h3>
<p><em>ad::rss::core::RssCheck::calculateAccelerationRestriction()</em> outputs a structure of type
<em>ad::rss::world::AccelerationRestriction</em>. This is a very small structure that contains three
ranges of acceleration allowed by RSS:</p>
<ul>
<li>allowable range of longitudinal acceleration,</li>
<li>allowable range of lateral acceleration to the left of the vehicle, and</li>
<li>allowable range of lateral acceleration to the right of the vehicle.</li>
</ul>
<p>Each acceleration range consists of two values: a lower bound and an upper
bound. The lower bound and upper bound simply specify an interval of allowable
acceleration. Note that a negative value of acceleration implies deceleration,
i.e. braking.</p>
<h4>Output data destination</h4>
<p>These three ranges (in <em>ad::rss::world::AccelerationRestriction</em>) are provided to the system
that calls the RSS top-level routine, and indicate the range of acceleration
that the AD system must ultimately achieve within its respective lane in order to comply to RSS. In other
words, if the AD system seeks to comply to the RSS model, it must achieve
an acceleration that is within these bounds provided by the RSS function.</p>
<p>Typically, the system would provide the RSS acceleration restriction data to the
actuation and control subsystem of the autonomous driving system. This
subsystem, external to the RSS library, should enforce the lower and upper
bounds of lateral and longitudinal acceleration in respect to the lane provided by the RSS function. Implementation of this process is external to the RSS library, and the system
integrator must ensure that this is implemented properly and that RSS output
values are used correctly.</p>
<h4>Bounds on the output data values</h4>
<p>As discussed above, the output values of the RSS function are lower and upper
bounds on acceleration. The lower and upper bounds determined by the RSS
function originate from the input provided to the RSS function. Namely,
acceleration values are provided as dynamics properties of each vehicle
acting as road agent/object in the situation. Hence, in the current
implementation, the set of possible output data values is a very small
set of values that are provided as input.</p>
<p>The output values can be further bounded within absolute lower and upper
limits by bounding the input values within those desired limits.
Also check the Doxygen documentation of the <em>withinValidInputRange()</em> functions of the
respective data types for the actual values defined.</p>
<p>It is the responsibility of the system external to the RSS library to ensure
that the acceleration and deceleration actually achieved by the vehicle always
remain within the limits calculated by the RSS function, and remain within other
limits unrelated to RSS (e.g. physical limits imposed by the vehicle
dynamics and the environment).</p>
<h4>Bounds on the output data size</h4>
<p>The output data of the RSS calculations is a fixed sized structure.
As such, the size of the output data is strictly bounded already.</p>
<p>It is the responsibility of the system integrator to determine an appropriate
rate or maximum rate at which to invoke the RSS library function.</p>
<h3 id="rss-library-code-validation">RSS library code validation<a class="headerlink" href="#rss-library-code-validation" title="Permanent link">&para;</a></h3>
<h4>Dependencies</h4>
<p>The RSS library has no dependency on any external library (except for the
C++ Standard Library and the logging library).</p>
<h4>Coding standards</h4>
<p>Code quality has been ensured through unit testing.</p>
<p>Unit testing achieved code coverage can be retrieved via <a href="https://intel.github.io/ad-rss-lib/coverage/index.html">github deployment</a>.</p>
<h4>Compiler and compiler security flags</h4>
<p>The development platforms are Ubuntu Linux 20.04 Focal Fossa and 22.04 Jammy Jellyfish.</p>
<p>A standard cmake toolchain has been used to compile the library. Other supported compilers are listed at the <a href="../../#systems">main page</a></p>
<p>The following, strict, <a href="https://github.com/intel/ad-rss-lib/blob/master/cmake/warnings.cmake">compilation flags</a> are used:
C++14, -Werror, -Wall, -Wextra, -pedantic, -Wconversion, -Wsign-conversion, -Wfloat-equal -Wshadow -Wswitch-default -Wenum-compare -Wformat -Wformat-security.</p>
<ul>
<li>-Werror turns all warnings into errors</li>
<li>-Wall enables many warnings about code constructs that are questionable</li>
<li>-Wextra enables additional warnings not enabled by -Wall</li>
<li>-Wconversion warns for implicit conversions (e.g. between integer and real types)</li>
<li>-Wsign-conversion warn for implicit conversions that may alter a value</li>
<li>-pedantic issues all warnings demanded by strict ISO C and C++</li>
<li>-Wfloat-equal warn if floating-point values are used in equality comparisons</li>
<li>-Wshadow warn on shadowed variable declarations</li>
<li>-Wswitch-default warn if the default case is missing in a switch</li>
<li>-Wenum-compare warn about a comparison between values of different enumerated types</li>
<li>-Wformat* warns about errors within format strings</li>
</ul>
<p>In addition, there are <a href="https://github.com/intel/ad-rss-lib/blob/master/cmake/hardening.cmake">hardening compiler flags</a>
* -fstack-protector-all -fasynchronous-unwind-tables -fno-omit-frame-pointer -fno-delete-null-pointer-checks -fno-strict-overflow -fwrapv -fPIE -fPIC -D_FORTIFY_SOURCE=2
and linker flags
* -Wl,-z,now -Wl,-z,relro -pie
defined to harden the resulting binaries. Hardening is disabled by default, as build hardening is usually injected by the surrounding build system.</p>
<p>Compilation with these flags completes without any error or warning.</p>
<h4>Code analysis</h4>
<p>The code analysis tool <code>cppcheck</code> was run on the library code, and no relevant issues found.</p>
<h4>Critical assets</h4>
<p>The library does not contain critical assets from a security perspective, other than the library code itself.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../HLD-Safety/" class="btn btn-neutral float-left" title="Safety"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Appendix-ParameterDiscussion/" class="btn btn-neutral float-right" title="Parameter Discussion">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/intel/ad-rss-lib" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../HLD-Safety/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Appendix-ParameterDiscussion/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
